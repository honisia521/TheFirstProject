import streamlit as st import yfinance as yf import pandas as pd import plotly.express as px from datetime import datetime, timedelta st.set_page_config(page_title="시가총액 TOP10 인터랙티브 그래프", layout="wide") # 기업과 티커 매핑 tickers = { 'Apple': 'AAPL', 'Microsoft': 'MSFT', 'Saudi Aramco': '2222.SR', 'Alphabet': 'GOOGL', 'Amazon': 'AMZN', 'Nvidia': 'NVDA', 'Berkshire Hathaway': 'BRK-B', 'Meta': 'META', 'TSMC': 'TSM', 'Tesla': 'TSLA', } st.title("📊 전 세계 시가총액 TOP10 기업의 지난 3년 주가 변화") st.markdown("※ 시가총액은 실시간으로 불러온 **주가 × 발행주식 수**가 아닌, 주가만으로 대체된 값입니다.") selected = st.sidebar.multiselect( "기업 선택", options=tickers.keys(), default=["Apple", "Microsoft", "Nvidia"] ) @st.cache_data(ttl=3600) def get_data(ticker_dict): end = datetime.today() start = end - timedelta(days=3*365) data = pd.DataFrame() for name, symbol in ticker_dict.items(): hist = yf.download(symbol, start=start, end=end, interval="1mo") hist['Company'] = name hist['Date'] = hist.index hist.reset_index(drop=True, inplace=True) hist = hist[['Date', 'Company', 'Close']] data = pd.concat([data, hist]) return data # 데이터 불러오기 df = get_data({k: v for k, v in tickers.items() if k in selected}) # 시각화 fig = px.line(df, x="Date", y="Close", color="Company", title="지난 3년간 주가 변화 (월별 종가)", labels={"Close": "종가 (USD)", "Date": "날짜"}) st.plotly_chart(fig, use_container_width=True)
